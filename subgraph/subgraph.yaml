specVersion: 0.0.4
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: NFTYFinance
    network: mainnet
    source:
      abi: NFTYFinance
      address: "0x2E2Ed0Cfd3AD2f1d34481277b3204d807Ca2F8c2"
      startBlock: 72
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - LendingDesk
        - ProtocolParams
        - Erc20
        - NftCollection
        - Loan
      abis:
        - name: NFTYFinance
          file: ../contracts/artifacts/contracts/NFTYFinanceV1.sol/NFTYFinanceV1.json
        - name: ERC20
          file: ../contracts/artifacts/@openzeppelin/contracts/token/ERC20/ERC20.sol/ERC20.json
      eventHandlers:
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: LoanOriginationFeeSet(uint256)
          handler: handleLoanOriginationFeeSet
        - event: ProtocolInitialized(address,address,address)
          handler: handleProtocolInitialized
        - event: NewLendingDeskInitialized(uint256,address,address)
          handler: handleNewLendingDeskInitialized
        - event: LendingDeskLiquidityDeposited(uint256,uint256)
          handler: handleLendingDeskLiquidityDeposited
        - event: LendingDeskLiquidityWithdrawn(uint256,uint256)
          handler: handleLendingDeskLiquidityWithdrawn
        - event: LendingDeskLoanConfigsSet(uint256,(address,bool,uint256,uint256,uint256,uint256,uint256,uint256)[])
          handler: handleLendingDeskLoanConfigsSet
        - event: LendingDeskLoanConfigRemoved(uint256,address)
          handler: handleLendingDeskLoanConfigRemoved
        - event: LendingDeskStateSet(uint256,bool)
          handler: handleLendingDeskStateSet
        - event: LendingDeskDissolved(uint256)
          handler: handleLendingDeskDissolved
        - event: Paused(address)
          handler: handlePaused
        - event: Unpaused(address)
          handler: handleUnpaused
        - event: NewLoanInitialized(uint256,uint256,address,address,uint256,uint256,uint256,uint256,uint256)
          handler: handleNewLoanInitialized
        - event: LoanPaymentMade(uint256,uint256,bool)
          handler: handleLoanPaymentMade
        - event: DefaultedLoanLiquidated(uint256)
          handler: handleDefaultedLoanLiquidated
        - event: PlatformWalletSet(address)
          handler: handlePlatformWalletSet
      file: ./src/nfty-finance.ts
  - kind: ethereum/contract
    name: LendingKeys
    network: mainnet
    source:
      abi: LendingKeys
      address: "0x21dF544947ba3E8b3c32561399E88B52Dc8b2823"
      startBlock: 71
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - LendingDesk
      abis:
        - name: LendingKeys
          file: ../contracts/artifacts/contracts/NFTYERC721V1.sol/NFTYERC721V1.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/lending-keys.ts
  - kind: ethereum/contract
    name: PromissoryNotes
    network: mainnet
    source:
      abi: PromissoryNotes
      address: "0x04C89607413713Ec9775E14b954286519d836FEf"
      startBlock: 69
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Loan
      abis:
        - name: PromissoryNotes
          file: ../contracts/artifacts/contracts/NFTYERC721V1.sol/NFTYERC721V1.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/promissory-notes.ts
  - kind: ethereum/contract
    name: ObligationNotes
    network: mainnet
    source:
      abi: ObligationNotes
      address: "0x4C4a2f8c81640e47606d3fd77B353E87Ba015584"
      startBlock: 70
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Loan
      abis:
        - name: ObligationNotes
          file: ../contracts/artifacts/contracts/NFTYERC721V1.sol/NFTYERC721V1.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/obligation-notes.ts
