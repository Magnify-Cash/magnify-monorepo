query Home {
  protocolInfo(id: "0") {
    id
    lendingDesksCount
    lendingKeys
    loanOriginationFee
    loansCount
    obligationNotes
    owner
    paused
    platformWallet
    erc20sCount
    nftCollectionsCount
  }
}

query ManageLendingDesks($walletAddress: String!) {
  lendingDesks(where: { owner: $walletAddress }) {
    id
    balance
    status
    loansCount
    loansDefaultedCount
    loansResolvedCount
    amountBorrowed
    netLiquidityIssued
    netProfit
    erc20 {
      id
      symbol
      decimals
    }
    loanConfigs(where: { active: true }) {
      id
    }
    loans {
      status
    }
  }
}

query CreateLendingDesk($walletAddress: String!) {
  lendingDesks(where: { owner: $walletAddress }) {
    id
    balance
    status
  }
}

query ManageLendingDesk($deskId: ID!) {
  lendingDesk(id: $deskId) {
    id
    owner {
      id
    }
    erc20 {
      id
      symbol
      decimals
    }
    balance
    status
    loanConfigs {
      nftCollection {
        id
      }
      id
      minAmount
      maxAmount
      minInterest
      maxInterest
      minDuration
      maxDuration
    }
    loans {
      status
    }
  }
}

query BrowseCollections {
  nftCollections(where: { activeLoanConfigsCount_gt: 0 }) {
    id
    loanConfigs {
      lendingDesk {
        erc20 {
          id
          symbol
          decimals
        }
      }
    }
  }
  protocolInfo(id: "0") {
    erc20sCount
    nftCollectionsCount
  }
}

query BrowseCollection($nftCollectionId: String) {
  lendingDesks(where: { status: Active, balance_gt: 0 }) {
    id
    balance
    status
    owner {
      id
    }
    erc20 {
      id
      symbol
      decimals
    }
    loanConfigs(where: { nftCollection_contains: $nftCollectionId }) {
      nftCollection {
        id
      }
      minAmount
      maxAmount
      minInterest
      maxInterest
      minDuration
      maxDuration
    }
  }
}

query QuickLoan($erc20Id: String, $nftCollectionId: String) {
  lendingDesks(where: { erc20: $erc20Id, status: Active, balance_gt: 0}) {
    id
    balance
    status
    erc20 {
      id
      symbol
      decimals
    }
    loanConfigs(where: { nftCollection: $nftCollectionId }) {
      minAmount
      maxAmount
      minDuration
      maxDuration
      minInterest
      maxInterest
      nftCollection {
        id
      }
    }
  }
  nftCollections(where: { activeLoanConfigsCount_gt: 0 }) {
    id
  }
}

query GetErc20sForNftCollection($nftCollectionId: ID!) {
  nftCollection(id: $nftCollectionId) {
    erc20s {
      erc20 {
        id
      }
    }
  }
}

query BorrowerDashboard($walletAddress: String!) {
  loans(where: { borrower: $walletAddress }) {
    id
    amount
    amountPaidBack
    duration
    startTime
    nftCollection {
      id
    }
    lendingDesk {
      erc20 {
        id
        symbol
        decimals
      }
    }
    nftId
    interest
    status
    lender {
      id
    }
  }
}

query LenderDashboard($walletAddress: String!) {
  lendingDesks(where: { owner: $walletAddress }) {
    id
    balance
    erc20 {
      id
      symbol
      decimals
    }
    loanConfigs {
      nftCollection {
        id
      }
    }
    loans(where: { lender: $walletAddress }) {
      id
      amount
      amountPaidBack
      duration
      startTime
      nftCollection {
        id
      }
      nftId
      interest
      status
      lender {
        id
      }
      borrower {
        id
      }
    }
  }
}
